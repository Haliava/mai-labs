from sympy import gcd
import re


def extract_b_numbers(file_path):
    with open(file_path, 'r', encoding='utf-8') as file:
        content = file.read()
    
    pattern = r'b\[(\d+)\]\s*=\s*([\d\s]+)(?=\s*b\[\d+\]|$)'
    matches = re.findall(pattern, content, re.MULTILINE)
    matches.sort(key=lambda x: int(x[0]))
    return [re.sub('[\n \r]', '', match[1]) for match in matches]


# var 97
b = ('32317006071311007300714876688669951960444102669715484032130345427524655138867890893197201411522913463688717960921898019494119559150490921095088154659532958503874299567395618219673716425161512471710572245372668627783640906801691678649446418591649317530669564054307187955084790694663645462522207130585313598517976812063892124319088235044342404746244282884078874563299701415062141318660299865829287412220006850178818084809821066080309148807883458984760277595104977034139040968946850951543306559379359784854692875258711991023925748874431662901753123777469424250037337946005227233188141200486943004270847830207407528082569')

for i, j in enumerate(extract_b_numbers('./lab2.txt')):
    gcd_val = gcd(int(b), int(re.sub(r"[^\d]", "", j)))
    if gcd_val != 1 and i != 97:
        print(f'ВАРИАНТ {i}\nЧИСЛО:\n{gcd_val}\n\n')
        print(f"НАШЕ ЧИСЛО / НАЙДЕННОЕ ЧИСЛО:\n{int(b) / gcd_val}")
        break
